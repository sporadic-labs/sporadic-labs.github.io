{"version":3,"sources":["webpack:///./src/templates/game/index.js","webpack:///./src/components/page/index.js","webpack:///./src/components/page/index.module.styl","webpack:///./src/templates/game/index.module.styl"],"names":["GameTemplate","iframeRef","React","createRef","onResize","_post$frontmatter","_this","props","data","markdownRemark","frontmatter","maxGameWidth","maxGameHeight","gameAspectRatio","widthScale","Math","min","innerWidth","heightScale","innerHeight","width","height","current","componentDidMount","this","resizeEvent","addListener","componentWillUnmount","removeListener","render","post","_post$frontmatter2","gameSource","title","date","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","_components_page__WEBPACK_IMPORTED_MODULE_2__","className","style","iframe","ref","src","frameBorder","markdownContent","dangerouslySetInnerHTML","__html","html","PureComponent","pageQuery","Page","_this$props","children","react__WEBPACK_IMPORTED_MODULE_2___default","gatsby__WEBPACK_IMPORTED_MODULE_3__","query","siteTitle","site","siteMetadata","pageTitle","react_helmet__WEBPACK_IMPORTED_MODULE_4___default","htmlAttributes","lang","_container__WEBPACK_IMPORTED_MODULE_5__","page","_public_static_d_1097489062_json__WEBPACK_IMPORTED_MODULE_1__","module","exports"],"mappings":"gNAMMA,sJACJC,UAAYC,IAAMC,cAWlBC,SAAW,WACT,IADeC,EACFC,EAAKC,MAAMC,KAAKC,eACiCC,YAAtDC,EAFON,EAEPM,aAAcC,EAFPP,EAEOO,cAAeC,EAFtBR,EAEsBQ,gBAI/BC,EAAaC,KAAKC,IAAIL,EAAcM,YAAcJ,EAClDK,EAAcH,KAAKC,IAAIJ,EAAeO,aAEtCC,EAAQP,EADAE,KAAKC,IAAIF,EAAYI,GAE7BG,EAASD,EAAQP,EACvBP,EAAKL,UAAUqB,QAAQF,MAAQA,EAC/Bd,EAAKL,UAAUqB,QAAQD,OAASA,yCArBlCE,6BACEC,KAAKpB,WACLqB,IAAYC,YAAYF,KAAKpB,aAG/BuB,gCACEF,IAAYG,eAAeJ,KAAKpB,aAkBlCyB,kBACE,IAAMC,EAAON,KAAKjB,MAAMC,KAAKC,eADtBsB,EAE6BD,EAAKpB,YAAjCsB,EAFDD,EAECC,WAAYC,EAFbF,EAEaE,MAAOC,EAFpBH,EAEoBG,KAG3B,OACEC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAML,MAAOA,GACXE,EAAAC,EAAAC,cAAA,UAAQE,UAAWC,IAAMC,OAAQC,IAAKlB,KAAKvB,UAAW0C,IAAKX,EAAYY,YAAY,MACnFT,EAAAC,EAAAC,cAAA,UAAKJ,GACLE,EAAAC,EAAAC,cAAA,SAAIH,GACJC,EAAAC,EAAAC,cAAA,OAAKE,UAAWC,IAAMK,gBAAiBC,wBAAyB,CAAEC,OAAQjB,EAAKkB,aArC5DC,iBA2CZjD,YAER,IAAMkD,EAAS,gJCnChBC,4FACJtB,kBAAS,IAAAuB,EACqB5B,KAAKjB,MAAzB0B,EADDmB,EACCnB,MAAOoB,EADRD,EACQC,SACf,OACEC,EAAAlB,EAAAC,cAACkB,EAAA,YAAD,CACEC,MAfQ,aAgBR3B,OAAQ,SAAArB,GACN,IAAMiD,EAAYjD,EAAKkD,KAAKC,aAAa1B,MACnC2B,EAAY3B,EAAWwB,EAAN,MAAqBxB,EAAUwB,EAEtD,OACEH,EAAAlB,EAAAC,cAAA,WACEiB,EAAAlB,EAAAC,cAACwB,EAAAzB,EAAD,CAAQ0B,eAAgB,CAAEC,KAAM,MAAQ9B,MAAO2B,IAC/CN,EAAAlB,EAAAC,cAAC2B,EAAA,EAAD,CAAWzB,UAAWC,IAAMyB,MAAOZ,KAT3C7C,KAAA0D,QAJajB,iBAsBJE,2GCrCfgB,EAAAC,QAAA,CAAkBH,KAAA,kDCAlBE,EAAAC,QAAA,CAAkB3B,OAAA","file":"component---src-templates-game-index-js-57cdceaecc4094685fe7.js","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport { graphql } from \"gatsby\";\r\nimport Page from \"../../components/page\";\r\nimport style from \"./index.module.styl\";\r\nimport resizeEvent from \"../../utils/resize-event\";\r\n\r\nclass GameTemplate extends PureComponent {\r\n  iframeRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    this.onResize();\r\n    resizeEvent.addListener(this.onResize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    resizeEvent.removeListener(this.onResize);\r\n  }\r\n\r\n  onResize = () => {\r\n    const post = this.props.data.markdownRemark;\r\n    const { maxGameWidth, maxGameHeight, gameAspectRatio } = post.frontmatter;\r\n\r\n    // Figure out a scale factor that fits the window size while respecting the aspect ratio and max\r\n    // width and height\r\n    const widthScale = Math.min(maxGameWidth, innerWidth) / gameAspectRatio;\r\n    const heightScale = Math.min(maxGameHeight, innerHeight);\r\n    const scale = Math.min(widthScale, heightScale);\r\n    const width = gameAspectRatio * scale;\r\n    const height = width / gameAspectRatio;\r\n    this.iframeRef.current.width = width;\r\n    this.iframeRef.current.height = height;\r\n  };\r\n\r\n  render() {\r\n    const post = this.props.data.markdownRemark;\r\n    const { gameSource, title, date } = post.frontmatter;\r\n    // const { previous, next } = this.props.pageContext;\r\n\r\n    return (\r\n      <Page title={title}>\r\n        <iframe className={style.iframe} ref={this.iframeRef} src={gameSource} frameBorder=\"0\" />\r\n        <h1>{title}</h1>\r\n        <p>{date}</p>\r\n        <div className={style.markdownContent} dangerouslySetInnerHTML={{ __html: post.html }} />\r\n      </Page>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameTemplate;\r\n\r\nexport const pageQuery = graphql`\r\n  query GameBySlug($slug: String!) {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n      }\r\n    }\r\n    markdownRemark(fields: { slug: { eq: $slug } }) {\r\n      id\r\n      excerpt\r\n      html\r\n      frontmatter {\r\n        title\r\n        date(formatString: \"MMMM DD, YYYY\")\r\n        maxGameWidth\r\n        maxGameHeight\r\n        gameAspectRatio\r\n        gameSource\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { PureComponent } from \"react\";\r\nimport { StaticQuery, graphql } from \"gatsby\";\r\nimport Helmet from \"react-helmet\";\r\nimport Container from \"../container\";\r\nimport style from \"./index.module.styl\";\r\n\r\nconst titleQuery = graphql`\r\n  query {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nclass Page extends PureComponent {\r\n  render() {\r\n    const { title, children } = this.props;\r\n    return (\r\n      <StaticQuery\r\n        query={titleQuery}\r\n        render={data => {\r\n          const siteTitle = data.site.siteMetadata.title;\r\n          const pageTitle = title ? `${siteTitle} | ${title}` : siteTitle;\r\n\r\n          return (\r\n            <div>\r\n              <Helmet htmlAttributes={{ lang: \"en\" }} title={pageTitle} />\r\n              <Container className={style.page}>{children}</Container>\r\n            </div>\r\n          );\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Page;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"index-module--page--2SnEF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iframe\":\"index-module--iframe--1ItP5\"};"],"sourceRoot":""}